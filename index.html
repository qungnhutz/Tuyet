<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quang Nháº­t Graduation</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link href="https://unpkg.com/swiper@8/swiper-bundle.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
  <script src="https://unpkg.com/swiper@8/swiper-bundle.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <style>
    body, html {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100vh;
      overflow: hidden;
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #ff6b6b, #ffd1dc);
    }
    .envelope-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 3000;
      perspective: 1500px;
    }
    .envelope-container.hidden {
      display: none;
    }
    .envelope {
      width: 80%;
      max-width: 600px;
      height: 60%;
      max-height: 400px;
      position: relative;
      transform-style: preserve-3d;
      background: url('https://www.transparenttextures.com/patterns/paper-fibers.png') repeat;
      background-color: #fffdf0;
      border: 2px solid #d4a373;
      border-radius: 8px;
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.4);
    }
    .envelope-back {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url('https://www.transparenttextures.com/patterns/paper-fibers.png') repeat;
      background-color: #fffdf0;
      border-radius: 8px;
      z-index: 1;
    }
    .envelope-front {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url('https://www.transparenttextures.com/patterns/paper-fibers.png') repeat;
      background-color: #fffdf0;
      border-radius: 8px;
      z-index: 2;
      box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.1);
    }
    .envelope-flap {
      position: absolute;
      top: -1px;
      left: 0;
      width: 100%;
      height: 60%;
      background: url('https://www.transparenttextures.com/patterns/paper-fibers.png') repeat;
      background-color: #fffdf0;
      clip-path: polygon(0 0, 50% 100%, 100% 0);
      transform-origin: top;
      z-index: 3;
      border-top: 2px solid #d4a373;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      display: flex;
      justify-content: center;
      align-items: flex-end;
      padding-bottom: 30px;
      transition: box-shadow 0.3s;
    }
    .envelope-flap.glow {
      box-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
    }
    .envelope-content {
      position: absolute;
      top: 20%;
      left: 5%;
      width: 90%;
      height: 60%;
      background: linear-gradient(135deg, #ffffff, #fff9e6);
      border-radius: 4px;
      z-index: 1.5;
      opacity: 0;
      transform: translateY(20px) scale(0.95);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }
    .open-btn {
      background: linear-gradient(45deg, #d4a373, #ff6b6b);
      padding: 14px 28px;
      border-radius: 50px;
      color: white;
      text-decoration: none;
      font-weight: 600;
      font-family: 'Poppins', sans-serif;
      transition: transform 0.3s, box-shadow 0.3s;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      box-shadow: 0 0 20px rgba(212, 163, 115, 0.7);
      cursor: pointer;
      z-index: 4;
      font-size: 1.2rem;
    }
    .open-btn:hover {
      transform: scale(1.1);
      box-shadow: 0 0 30px rgba(212, 163, 115, 1);
    }
    .open-btn .icon {
      transition: transform 0.3s;
    }
    .open-btn:hover .icon {
      transform: rotate(360deg);
    }
    .confetti-canvas {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 2;
      pointer-events: none;
    }
    .swiper-container {
      width: 100%;
      height: 100vh;
      display: none;
    }
    .swiper-container.active {
      display: block;
    }
    .swiper-slide {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      text-align: center;
      position: relative;
      color: white;
      overflow: hidden;
      padding: 20px;
    }
    .slide-1 { position: relative; }
    .slide-2 { background: linear-gradient(135deg, #6b7280, #a5b4fc); }
    .slide-3 { background: linear-gradient(135deg, #34d399, #a7f3d0); }
    .slide-4 { background: linear-gradient(135deg, #f59e0b, #fef3c7); }
    .slide-5 { background: linear-gradient(135deg, #ec4899, #f9a8d4); }
    .video-bg {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: 0;
      opacity: 0.8;
    }
    .fallback-bg {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #ff6b6b, #ffd1dc);
      animation: gradientShift 10s ease infinite;
      z-index: 0;
    }
    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    .profile-img {
      width: 200px;
      height: 200px;
      border-radius: 50%;
      object-fit: cover;
      border: 6px solid white;
      margin-bottom: 20px;
      box-shadow: 0 0 25px rgba(255, 255, 255, 0.6);
      transition: transform 0.3s;
      position: relative;
    }
    .profile-img:hover {
      transform: rotate(5deg) scale(1.05);
    }
    .profile-img::after {
      content: '';
      position: absolute;
      top: -10px;
      left: -10px;
      width: 220px;
      height: 220px;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.3) 0%, transparent 70%);
      z-index: -1;
      animation: lensFlare 3s ease-in-out infinite;
    }
    @keyframes lensFlare {
      0%, 100% { opacity: 0.3; transform: scale(1); }
      50% { opacity: 0.6; transform: scale(1.1); }
    }
    .btn {
      background: linear-gradient(45deg, #ff6b6b, #ff8e53);
      padding: 14px 28px;
      border-radius: 30px;
      color: white;
      text-decoration: none;
      font-weight: 600;
      font-family: 'Poppins', sans-serif;
      transition: transform 0.3s, box-shadow 0.3s;
      z-index: 10;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      box-shadow: 0 0 15px rgba(255, 107, 107, 0.5);
    }
    .btn:hover {
      transform: scale(1.1);
      box-shadow: 0 0 25px rgba(255, 107, 107, 0.8);
    }
    .gallery-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 15px;
      padding: 20px;
      max-width: 800px;
      width: 100%;
      margin: 0 auto;
    }
    .gallery-img {
      width: 100%;
      height: 120px;
      object-fit: cover;
      border-radius: 10px;
      transition: transform 0.3s, box-shadow 0.3s;
      cursor: pointer;
      box-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
    }
    .gallery-img:hover {
      transform: scale(1.1);
      box-shadow: 0 0 20px rgba(255, 255, 255, 0.6);
    }
    .parallax-bg {
      position: absolute;
      top: -50px;
      left: -50px;
      width: calc(100% + 100px);
      height: calc(100% + 100px);
      background: url('https://www.transparenttextures.com/patterns/paper-fibers.png') repeat;
      opacity: 0.15;
      z-index: 1;
    }
    .content-box {
      background: rgba(255, 255, 255, 0.1);
      padding: 20px;
      border-radius: 15px;
      backdrop-filter: blur(5px);
      max-width: 900px;
      width: 90%;
      margin: 0 auto;
      z-index: 3;
    }
    h1, h2, h3 {
      font-family: 'Great Vibes', cursive;
      text-shadow: 0 0 15px rgba(255, 255, 255, 0.9);
    }
    p {
      font-family: 'Poppins', sans-serif;
      font-weight: 300;
    }
    .icon {
      transition: transform 0.3s;
    }
    .btn:hover .icon {
      transform: rotate(360deg);
    }
    .map-container {
      width: 100%;
      height: 150px;
      border-radius: 10px;
      overflow: hidden;
      position: relative;
    }
    .car-animation {
      position: absolute;
      bottom: 10px;
      left: -50px;
      width: 40px;
      height: 20px;
      background: url('https://img.icons8.com/color/48/000000/car.png') no-repeat center;
      background-size: contain;
      animation: driveCar 5s linear infinite;
    }
    @keyframes driveCar {
      0% { transform: translateX(-50px); }
      100% { transform: translateX(calc(100% + 50px)); }
    }
    .pulse {
      animation: pulse 2s infinite;
    }
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    .neon-3d {
      font-size: 3.5rem;
      font-weight: 700;
      font-family: 'Poppins', sans-serif;
      color: #fff;
      text-shadow: 
        0 0 5px #ffd700,
        0 0 10px #ffd700,
        0 0 20px #ff6b6b,
        0 0 40px #ff6b6b;
      animation: neonFlicker 1.5s infinite alternate;
    }
    .neon-3d1 {
      font-size: 2.5rem;
      font-weight: 700;
      font-family: 'Poppins', sans-serif;
      color: #fff;
      text-shadow: 
        0 0 5px #ffd700,
        0 0 10px #ffd700,
        0 0 20px #ff6b6b,
        0 0 40px #ff6b6b;
      animation: neonFlicker 1.5s infinite alternate;
    }
    @keyframes neonFlicker {
      0%, 18%, 22%, 25%, 53%, 57%, 100% { text-shadow: 0 0 5px #ffd700, 0 0 10px #ffd700, 0 0 20px #ff6b6b, 0 0 40px #ff6b6b; }
      20%, 24%, 55% { text-shadow: none; }
    }
    .sweep-text {
      background: linear-gradient(90deg, transparent, #ffffff 50%, transparent);
      background-size: 200% 100%;
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      animation: sweep 2s ease-in-out infinite;
    }
    @keyframes sweep {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }
    .countdown-container {
      display: flex;
      gap: 8px;
      margin-top: 15px;
      justify-content: center;
      flex-wrap: wrap;
    }
    .countdown-box {
      background: linear-gradient(45deg, #ff6b6b, #ff8e53);
      border: 2px solid transparent;
      border-image: linear-gradient(45deg, #ffffff, #ffd700) 1;
      border-radius: 10px;
      padding: 8px;
      width: 70px;
      height: 70px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      backdrop-filter: blur(5px);
      position: relative;
      perspective: 1000px;
      animation: gradientBox 5s ease infinite;
    }
    @keyframes gradientBox {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    .countdown-box .number {
      font-size: 1.8rem;
      font-weight: 700;
      color: white;
      line-height: 1;
      position: relative;
      z-index: 1;
    }
    .countdown-box .label {
      font-size: 0.7rem;
      font-weight: 300;
      color: white;
      margin-top: 5px;
    }
    .countdown-box .flip-card {
      width: 100%;
      height: 40px;
      position: absolute;
      top: 8px;
      transform-style: preserve-3d;
      transition: transform 0.6s;
    }
    .countdown-box .flip-card.flip {
      transform: rotateX(180deg);
    }
    .countdown-box .flip-card-front, .countdown-box .flip-card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.8rem;
      font-weight: 700;
      color: white;
    }
    .countdown-box .flip-card-back {
      transform: rotateX(180deg);
    }
    .countdown-box:hover {
      transform: scale(1.05);
    }
    .countdown-box.flash {
      animation: flash-border 0.5s ease-out;
    }
    @keyframes flash-border {
      0% { border-image: linear-gradient(45deg, #ffffff, #ffffff) 1; }
      100% { border-image: linear-gradient(45deg, #ffffff, #ffd700) 1; }
    }
    .lightbox {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      z-index: 2000;
      justify-content: center;
      align-items: center;
      flex-direction: column;
    }
    .lightbox img {
      max-width: 90%;
      max-height: 80%;
      border-radius: 10px;
      border: 4px solid #fff;
      box-shadow: 0 0 30px rgba(255, 255, 255, 0.5);
      object-fit: contain;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      transition: transform 0.3s ease, opacity 0.3s ease;
    }
    .lightbox .close {
      position: absolute;
      top: 20px;
      right: 20px;
      color: white;
      font-size: 2.5rem;
      cursor: pointer;
      background: rgba(255, 107, 107, 0.8);
      border-radius: 50%;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.3s, background 0.3s;
    }
    .lightbox .close:hover {
      transform: scale(1.2);
      background: rgba(255, 107, 107, 1);
    }
    .svg-text {
      stroke: #ff6b6b;
      stroke-width: 2;
      fill: none;
      stroke-dasharray: 1000;
      stroke-dashoffset: 1000;
      animation: drawText 3s ease forwards;
    }
    @keyframes drawText {
      to { stroke-dashoffset: 0; }
    }
    .firework-canvas {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 2;
      pointer-events: none;
    }
    @media (max-width: 768px) {
      .envelope {
        width: 90%;
        height: 50%;
      }
      .open-btn {
        padding: 12px 24px;
        font-size: 1rem;
      }
      .swiper-container { height: 100vh; }
      .swiper-slide { padding: 10px; }
      .content-box { padding: 15px; width: 95%; }
      h1 { font-size: 2.5rem; }
      .neon-3d { font-size: 2.5rem; }
      .profile-img { width: 150px; height: 150px; }
      .profile-img::after { width: 170px; height: 170px; }
      .gallery-grid { 
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); 
        gap: 12px; 
        padding: 15px; 
      }
      .gallery-img { height: 100px; }
      .countdown-box { width: 60px; height: 60px; padding: 6px; }
      .countdown-box .number, .countdown-box .flip-card-front, .countdown-box .flip-card-back { font-size: 1.5rem; }
      .countdown-box .label { font-size: 0.6rem; }
      .countdown-container { gap: 6px; }
      .btn { padding: 10px 20px; font-size: 0.9rem; }
      p.text-xl { font-size: 1rem; }
      p.text-lg { font-size: 0.9rem; }
      .map-container { height: 120px; }
      .video-bg { display: none; }
      .fallback-bg { display: block; }
      .lightbox img {
        max-width: 95%;
        max-height: 70%;
      }
      .lightbox .close {
        font-size: 2rem;
        width: 35px;
        height: 35px;
      }
    }
    @media (max-width: 480px) {
      .envelope {
        width: 95%;
        height: 45%;
      }
      .open-btn {
        padding: 10px 20px;
        font-size: 0.9rem;
      }
      h1 { font-size: 2rem; }
      .neon-3d { font-size: 2rem; }
      .profile-img { width: 120px; height: 120px; }
      .profile-img::after { width: 140px; height: 140px; }
      .gallery-grid { 
        grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); 
        gap: 10px; 
        padding: 10px; 
      }
      .gallery-img { height: 80px; }
      .countdown-box { width: 50px; height: 50px; }
      .countdown-box .number, .countdown-box .flip-card-front, .countdown-box .flip-card-back { font-size: 1.2rem; }
      .countdown-box .label { font-size: 0.5rem; }
      .btn { padding: 8px 16px; font-size: 0.8rem; }
      .lightbox img {
        max-width: 90%;
        max-height: 60%;
      }
      .lightbox .close {
        font-size: 1.8rem;
        width: 30px;
        height: 30px;
      }
    }
  </style>
</head>
<body>
  <!-- Audio elements for the two MP3s -->
  <audio id="backgroundMusic1" volume="0.3">
    <source src="music1.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>
  <audio id="backgroundMusic2" volume="0.7">
    <source src="music2.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>

  <!-- Envelope Container -->
  <div class="envelope-container" id="envelope-container">
    <canvas class="confetti-canvas" id="confetti-canvas"></canvas>
    <div class="envelope">
      <div class="envelope-back"></div>
      <div class="envelope-content"></div>
      <div class="envelope-front"></div>
      <div class="envelope-flap">
        <div class="open-btn pulse" onclick="openInvitation()">
          <i class="fa-solid fa-envelope-open icon"></i> OPEN
        </div>
      </div>
    </div>
  </div>

  <!-- Lightbox -->
  <div class="lightbox" id="lightbox">
    <span class="close" onclick="closeLightbox()">Ã</span>
    <img id="lightbox-img" src="" alt="Gallery Image">
  </div>

  <!-- Main Invitation Content -->
  <div class="swiper-container" id="swiper-container">
    <div class="swiper-wrapper">
      <div class="swiper-slide slide-1" id="intro">
        <video class="video-bg" autoplay muted loop playsinline>
          <source src="https://assets.mixkit.co/videos/preview/mixkit-fireworks-in-the-night-sky-3451-large.mp4" type="video/mp4">
        </video>
        <div class="fallback-bg"></div>
        <canvas class="firework-canvas" id="firework-canvas-intro"></canvas>
        <div class="parallax-bg"></div>
        <div class="content-box" id="introContent">
          <span class="neon-3d1" id="graduation-text">QUANG NHAT</span>
          <span class="neon-3d" id="graduation-text">GRADUATION</span>
          <p class="text-2xl mt-4 mb-4 sweep-text">ChÃ o má»«ng báº¡n Äáº¿n vá»i lá» tá»t nghiá»p!</p>
          <p class="text-lg sweep-text">HÃ nh trÃ¬nh Äáº·c biá»t nÃ y sáº½ trá» nÃªn Ã½ nghÄ©a náº¿u cÃ³ sá»± gÃ³p máº·t cá»§a báº¡n!</p>
        </div>    
      </div>
      <div class="swiper-slide slide-2" id="main-invitation">
        <canvas class="firework-canvas" id="firework-canvas-invitation"></canvas>
        <div class="parallax-bg"></div>
        <div class="content-box">
          <img src="nhat.jpg" alt="Quang Nháº­t" class="profile-img">
          <h2 class="text-4xl font-bold mb-2 wave-text">ThÃ¢n Má»i: <span id="guestName">Em Tráº§n Thá» ThÃºy Nga</span></h2>
          <p class="text-xl mb-4 wave-text">Äáº¿n tham dá»± lá» tá»t nghiá»p cá»§a <br/><span class="font-bold">Quang Nháº­t siÃªu cáº¥p Äzð</span></p>
          <p class="text-lg wave-text"><i class="fa-solid fa-clock icon mr-2"></i>Thá»i gian: 14:00 PM, NgÃ y 22/06/2025</p>
          <p class="text-lg mb-4 wave-text"><i class="fa-solid fa-map-marker-alt icon mr-2"></i>Äá»a Äiá»m: Há»i trÆ°á»ng Äáº¡i há»c Kinh Táº¿-KÄ© Thuáº­t CÃ´ng Nghiá»p, 218 LÄ©nh Nam, HoÃ ng Mai, HÃ  Ná»i</p>
          <div class="countdown-container" id="countdown">
            <div class="countdown-box" id="days">
              <div class="flip-card" id="flip-days">
                <div class="flip-card-front">00</div>
                <div class="flip-card-back">00</div>
              </div>
              <span class="label">Days</span>
            </div>
            <div class="countdown-box" id="hours">
              <div class="flip-card" id="flip-hours">
                <div class="flip-card-front">00</div>
                <div class="flip-card-back">00</div>
              </div>
              <span class="label">Hours</span>
            </div>
            <div class="countdown-box" id="minutes">
              <div class="flip-card" id="flip-minutes">
                <div class="flip-card-front">00</div>
                <div class="flip-card-back">00</div>
              </div>
              <span class="label">Minutes</span>
            </div>
            <div class="countdown-box" id="seconds">
              <div class="flip-card" id="flip-seconds">
                <div class="flip-card-front">00</div>
                <div class="flip-card-back">00</div>
              </div>
              <span class="label">Seconds</span>
            </div>
          </div>
        </div>
      </div>
      <!-- <div class="swiper-slide slide-3" id="gallery">
        <canvas class="firework-canvas" id="firework-canvas-gallery"></canvas>
        <div class="parallax-bg"></div>
        <div class="content-box">
          <h2 class="text-4xl font-bold mb-4"><i class="fa-solid fa-camera icon mr-2"></i>qungnhutz with you Äá»«ng double click mÃ n hÃ¬nh nhÃ© ð¥°</h2>
          <div class="gallery-grid">
            <img src="f1.jpg" alt="Ká»· niá»m 1" class="gallery-img" onclick="openLightbox(this.src)">
            <img src="f2.jpg" alt="Ká»· niá»m 2" class="gallery-img" onclick="openLightbox(this.src)">
            <img src="f3.jpg" alt="Ká»· niá»m 3" class="gallery-img" onclick="openLightbox(this.src)">
            <img src="f4.jpg" alt="Ká»· niá»m 4" class="gallery-img" onclick="openLightbox(this.src)">
            <img src="f5.jpg" alt="Ká»· niá»m 5" class="gallery-img" onclick="openLightbox(this.src)">
            <img src="f6.jpg" alt="Ká»· niá»m 6" class="gallery-img" onclick="openLightbox(this.src)">
            <img src="f7.jpg" alt="Ká»· niá»m 6" class="gallery-img" onclick="openLightbox(this.src)">
            <img src="f8.jpg" alt="Ká»· niá»m 6" class="gallery-img" onclick="openLightbox(this.src)">
            <img src="f9.jpg" alt="Ká»· niá»m 6" class="gallery-img" onclick="openLightbox(this.src)">
          </div>
        </div>
      </div> -->
      <div class="swiper-slide slide-4" id="parking">
        <canvas class="firework-canvas" id="firework-canvas-parking"></canvas>
        <div class="parallax-bg"></div>
        <div class="content-box">
          <h3 class="text-3xl font-bold mb-4"><i class="fa-solid fa-parking icon mr-2"></i>HÆ°á»ng Dáº«n Gá»­i Xe</h3>
          <ul class="text-left mb-4 list-disc list-inside">
            <li><i class="fa-solid fa-map-pin icon mr-2"></i>Gá»­i xe táº¡i <strong>Khu nhÃ  xe Cá»ng C2</strong> (218 LÄ©nh Nam, HoÃ ng Mai, HÃ  Ná»i).</li>
            <li><i class="fa-solid fa-user-shield icon mr-2"></i>Äi tá»« ngÃµ 218 vÃ o cuá»i ÄÆ°á»ng ráº½ trÃ¡i, sáº½ tháº¥y cá»ng C1 Äi tiáº¿p ÄÆ°á»ng sáº½ tháº¥y cá»ng C2</li>
            <li><i class="fa-solid fa-ticket-alt icon mr-2"></i>PhÃ­ gá»­i xe: <strong>3 cÃ nh</strong></li>
            <li><i class="fa-solid fa-exclamation-circle icon mr-2"></i>LÆ°u Ã½: Äáº¿n sá»m 15-20 phÃºt Äá» hoÃ n táº¥t gá»­i xe vÃ  vÃ o há»i trÆ°á»ng.</li>
          </ul>
          <div class="map-container">
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3725.305042042156!2d105.87348031540275!3d20.98321708599823!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3135afd765487289%3A0x21bd5839ba683d5f!2sTr%C6%B0%E1%BB%9Dng+%C4%90%E1%BA%A1i+H%E1%BB%8Dc+Kinh+T%E1%BA%BF+K%E1%BB%B9+Thu%E1%BA%ADt+C%C3%B4ng+Nghi%E1%BB%87p!5e0!3m2!1sen!2s!4v1698281234567" width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
            <div class="car-animation"></div>
          </div>
        </div>
      </div>
      <div class="swiper-slide slide-5" id="thank-you">
        <canvas class="firework-canvas" id="firework-canvas-thank-you"></canvas>
        <div class="parallax-bg"></div>
        <div class="content-box">
          <svg width="100%" height="100px" viewBox="0 0 600 100">
            <text x="50%" y="50%" font-family="Great+Vibes" font-size="60" text-anchor="middle" class="svg-text">Nháº­t cáº£m Æ¡nnn ð</text>
          </svg>
          <p class="text-xl">TrÃ¢n trá»ng cáº£m Æ¡n báº¡n ÄÃ£ dÃ nh thá»i gian Äáº¿n chung vui cÃ¹ng Nháº­t trong ngÃ y Äáº·c biá»t nÃ y!</p>
          <p class="text-lg mt-4">Háº¹n gáº·p báº¡n táº¡i buá»i lá»!</p>
        </div>
      </div>
    </div>
    <div class="swiper-pagination"></div>
  </div>

  <script>
    // Initialize Confetti Effect for Envelope Opening
    function initializeConfetti() {
      try {
        const canvas = document.getElementById('confetti-canvas');
        if (!canvas) {
          console.error('Confetti canvas not found');
          return () => {};
        }
        const ctx = canvas.getContext('2d');
        let particles = [];
        const isMobile = window.innerWidth <= 768;

        function resizeCanvas() {
          canvas.width = window.innerWidth;
          canvas.height = window.innerHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        class Confetti {
          constructor(x, y) {
            this.x = x;
            this.y = y;
            this.size = Math.random() * (isMobile ? 8 : 12) + 4;
            this.vx = (Math.random() - 0.5) * (isMobile ? 6 : 8);
            this.vy = (Math.random() - 0.5) * (isMobile ? 6 : 8);
            this.alpha = 1;
            this.life = isMobile ? 80 : 120;
            this.maxLife = this.life;
            this.rotation = Math.random() * Math.PI * 2;
            this.shape = Math.random() > 0.5 ? 'square' : 'circle';
            this.color = `hsl(${Math.random() * 360}, 80%, 60%)`;
            this.spin = (Math.random() - 0.5) * 0.1;
          }

          update() {
            this.x += this.vx;
            this.y += this.vy;
            this.vy += 0.05;
            this.vx *= 0.98;
            this.vy *= 0.98;
            this.rotation += this.spin;
            this.alpha = this.life / this.maxLife;
            this.life--;
            return this.life > 0;
          }

          draw() {
            ctx.save();
            ctx.translate(this.x, this.y);
            ctx.rotate(this.rotation);
            ctx.globalAlpha = this.alpha;
            ctx.fillStyle = this.color;
            ctx.shadowBlur = 10;
            ctx.shadowColor = this.color;
            if (this.shape === 'square') {
              ctx.fillRect(-this.size / 2, -this.size / 2, this.size, this.size);
            } else {
              ctx.beginPath();
              ctx.arc(0, 0, this.size / 2, 0, Math.PI * 2);
              ctx.fill();
            }
            ctx.restore();
          }
        }

        function animate() {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          particles = particles.filter(p => p.update());
          particles.forEach(p => p.draw());
          if (particles.length > 0) requestAnimationFrame(animate);
        }

        function createConfetti(x, y, count) {
          for (let i = 0; i < count; i++) {
            particles.push(new Confetti(x, y));
          }
          if (particles.length > 0) animate();
        }

        return createConfetti;
      } catch (error) {
        console.error('Error initializing confetti:', error);
        return () => {};
      }
    }

    const createConfetti = initializeConfetti();

    // Function to open the invitation
    function openInvitation() {
      try {
        const envelopeContainer = document.getElementById('envelope-container');
        const envelopeFlap = document.querySelector('.envelope-flap');
        const envelopeFront = document.querySelector('.envelope-front');
        const envelopeBack = document.querySelector('.envelope-back');
        const envelopeContent = document.querySelector('.envelope-content');
        const swiperContainer = document.getElementById('swiper-container');
        const audio1 = document.getElementById('backgroundMusic1');

        if (!envelopeContainer || !envelopeFlap || !envelopeFront || !envelopeBack || !envelopeContent || !swiperContainer || !audio1) {
          console.error('Missing DOM elements:', { envelopeContainer, envelopeFlap, envelopeFront, envelopeBack, envelopeContent, swiperContainer, audio1 });
          return;
        }

        // Animation timeline
        const tl = gsap.timeline({
          defaults: { ease: 'power3.out' },
          onComplete: () => {
            envelopeContainer.classList.add('hidden');
            swiperContainer.classList.add('active');
            try {
              // Initialize Swiper
              const swiper = new Swiper('.swiper-container', {
                direction: 'vertical',
                loop: false,
                autoplay: {
                  delay: 6000,
                  disableOnInteraction: true,
                },
                pagination: {
                  el: '.swiper-pagination',
                  clickable: true,
                },
                mousewheel: window.innerWidth > 768,
                effect: 'creative',
                creativeEffect: {
                  prev: { translate: [0, '-100%', 0], opacity: 0, scale: 0.8 },
                  next: { translate: [0, '100%', 0], opacity: 0, scale: 0.8 },
                },
                speed: 1200,
              });

              // Trigger fireworks on slide change
              swiper.on('slideChangeTransitionStart', function () {
                const activeIndex = swiper.activeIndex;
                fireworkTriggers[activeIndex]();
                const activeSlide = swiper.slides[activeIndex];
                const elements = activeSlide.querySelectorAll('h1, h2, h3, p, img, a, .content-box, .neon-3d, .neon-3d1, .countdown-box');
                gsap.from(elements, {
                  opacity: 0,
                  y: 50,
                  scale: 0.9,
                  stagger: 0.15,
                  duration: 1.5,
                  ease: 'power4.out',
                });
                gsap.from(activeSlide.querySelectorAll('.icon'), {
                  opacity: 0,
                  rotation: 180,
                  stagger: 0.1,
                  duration: 1,
                  ease: 'back.out(1.7)',
                });
                const waveElements = activeSlide.querySelectorAll('.wave-text');
                waveElements.forEach((el, index) => {
                  gsap.from(el, {
                    opacity: 0,
                    y: 20,
                    duration: 1,
                    delay: index * 0.2,
                    ease: 'power2.out',
                  });
                });
              });

              // Trigger initial animations and fireworks
              fireworkTriggers[0]();
              gsap.from('#graduation-text', {
                opacity: 0,
                rotationX: 90,
                y: 50,
                duration: 1.5,
                ease: 'power4.out',
              });
              gsap.from('.sweep-text', {
                opacity: 0,
                y: 50,
                duration: 1,
                ease: 'power4.out',
                stagger: 0.2,
              });
            } catch (err) {
              console.error('Error initializing Swiper:', err);
            }
          }
        });

        // Pulse envelope to draw attention
        tl.to('.envelope', {
          scale: 1.1,
          duration: 0.4,
          ease: 'power2.inOut',
        });

        // Add glow to flap and open it upward
        tl.to(envelopeFlap, {
          rotateX: 180,
          duration: 1.2,
          ease: 'back.out(1.8)',
          onStart: () => envelopeFlap.classList.add('glow'),
          onComplete: () => envelopeFlap.classList.remove('glow'),
        }, '-=0.2');

        // Reveal content with scale and slide upward
        tl.to(envelopeContent, {
          opacity: 1,
          translateY: -60,
          scale: 1,
          duration: 1,
          ease: 'power3.out',
          onStart: () => {
            // Trigger confetti at envelope center
            const envelopeRect = document.querySelector('.envelope').getBoundingClientRect();
            createConfetti(
              envelopeRect.left + envelopeRect.width / 2,
              envelopeRect.top + envelopeRect.height / 3,
              window.innerWidth <= 768 ? 50 : 100
            );
          }
        }, '-=0.8');

        // Dim front and back for depth
        tl.to([envelopeFront, envelopeBack], {
          opacity: 0.5,
          duration: 0.6,
        }, '-=0.6');

        // Spin and shrink envelope as it exits
        tl.to('.envelope', {
          scale: 0.7,
          rotate: 10,
          y: -300,
          opacity: 0,
          duration: 0.8,
          ease: 'power2.in',
        });

        // Fade out container
        tl.to(envelopeContainer, {
          opacity: 0,
          duration: 0.4,
        }, '-=0.4');

        // Play music1.mp3 after 3 seconds
        setTimeout(() => {
          try {
            audio1.play().catch(error => {
              console.error('Audio playback for music1 failed:', error);
              document.addEventListener('click', function playAudio1() {
                audio1.play().catch(err => console.error('Retry audio playback for music1 failed:', err));
                document.removeEventListener('click', playAudio1);
              }, { once: true });
            });
          } catch (err) {
            console.error('Error playing music1:', err);
          }
        }, 3000);
      } catch (error) {
        console.error('Error in openInvitation:', error);
      }
    }

    // Realistic Clustered Firework Effect
    function initializeFireworks(canvasId) {
      try {
        const canvas = document.getElementById(canvasId);
        if (!canvas) {
          console.error(`Canvas element "${canvasId}" not found`);
          return () => {};
        }
        const ctx = canvas.getContext('2d');
        const isMobile = window.innerWidth <= 768;
        let bursts = [];

        function resizeCanvas() {
          canvas.width = window.innerWidth;
          canvas.height = window.innerHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        class Streak {
          constructor(x, y, angle, velocity, length, color, life) {
            this.x = x;
            this.y = y;
            this.vx = Math.cos(angle) * velocity;
            this.vy = Math.sin(angle) * velocity;
            this.length = length;
            this.color = color;
            this.life = life;
            this.maxLife = life;
            this.gravity = 0.02;
            this.drift = (Math.random() - 0.5) * 0.1;
          }

          update() {
            this.vy += this.gravity;
            this.x += this.vx + this.drift;
            this.y += this.vy;
            this.life -= 1;
            this.vx *= 0.99;
            this.vy *= 0.99;
            return this.life > 0;
          }

          draw() {
            const alpha = this.life / this.maxLife;
            ctx.beginPath();
            ctx.moveTo(this.x, this.y);
            const endX = this.x - this.vx * this.length;
            const endY = this.y - this.vy * this.length;
            ctx.lineTo(endX, endY);
            ctx.strokeStyle = `rgba(${this.color.r}, ${this.color.g}, ${this.color.b}, ${alpha})`;
            ctx.lineWidth = 2;
            ctx.shadowBlur = 10;
            ctx.shadowColor = `rgba(${this.color.r}, ${this.color.g}, ${this.color.b}, ${alpha})`;
            ctx.stroke();
          }
        }

        class Burst {
          constructor(x, y, streakCount, color) {
            this.x = x;
            this.y = y;
            this.streaks = [];
            for (let i = 0; i < streakCount; i++) {
              const angle = (i / streakCount) * Math.PI * 2 + (Math.random() - 0.5) * 0.1;
              const velocity = 3 + Math.random() * 2;
              const length = isMobile ? 5 + Math.random() * 5 : 8 + Math.random() * 8;
              const life = isMobile ? 60 + Math.random() * 20 : 80 + Math.random() * 30;
              this.streaks.push(new Streak(x, y, angle, velocity, length, color, life));
            }
          }

          update() {
            this.streaks = this.streaks.filter(streak => streak.update());
            return this.streaks.length > 0;
          }

          draw() {
            this.streaks.forEach(streak => streak.draw());
          }
        }

        function animate() {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          bursts = bursts.filter(burst => burst.update());
          bursts.forEach(burst => burst.draw());
          requestAnimationFrame(animate);
        }
        animate();

        function createFireworks() {
          const colors = [
            { r: 255, g: 51, b: 51 },   // Red
            { r: 255, g: 215, b: 0 },   // Gold
            { r: 51, g: 255, b: 51 },   // Green
            { r: 51, g: 51, b: 255 },   // Blue
            { r: 255, g: 51, b: 255 },  // Purple
            { r: 255, g: 255, b: 255 }, // White
            { r: 255, g: 153, b: 51 },  // Orange
          ];
          const burstCount = isMobile ? 3 : 5;
          const streakCount = isMobile ? 20 : 30;

          for (let i = 0; i < burstCount; i++) {
            setTimeout(() => {
              const x = canvas.width * (0.3 + Math.random() * 0.4);
              const y = canvas.height * (0.2 + Math.random() * 0.3);
              const color = colors[Math.floor(Math.random() * colors.length)];
              bursts.push(new Burst(x, y, streakCount, color));
            }, i * 300);
          }

          for (let i = 0; i < (isMobile ? 2 : 3); i++) {
            setTimeout(() => {
              const x = canvas.width * (0.3 + Math.random() * 0.4);
              const y = canvas.height * (0.2 + Math.random() * 0.3);
              bursts.push(new Burst(x, y, Math.floor(streakCount / 2), { r: 255, g: 255, b: 255 }));
            }, i * 400 + 200);
          }
        }

        return createFireworks;
      } catch (error) {
        console.error(`Error initializing fireworks for ${canvasId}:`, error);
        return () => {};
      }
    }

    // Initialize fireworks for each slide
    const fireworkCanvases = [
      'firework-canvas-intro',
      'firework-canvas-invitation',
      'firework-canvas-gallery',
      'firework-canvas-parking',
      'firework-canvas-thank-you'
    ];
    const fireworkTriggers = fireworkCanvases.map(id => initializeFireworks(id));

    // Initialize Emoji Effect for Double-Click
    function initializeEmojiEffect() {
      try {
        const canvas = document.createElement('canvas');
        canvas.className = 'emoji-canvas';
        canvas.style.position = 'absolute';
        canvas.style.top = '0';
        canvas.style.left = '0';
        canvas.style.width = '100%';
        canvas.style.height = '100%';
        canvas.style.zIndex = '1000';
        canvas.style.pointerEvents = 'none';
        document.body.appendChild(canvas);
        const ctx = canvas.getContext('2d');
        let emojis = [];
        const isMobile = window.innerWidth <= 768;

        function resizeCanvas() {
          canvas.width = window.innerWidth;
          canvas.height = window.innerHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        class Emoji {
          constructor(x, y) {
            this.x = x;
            this.y = y;
            this.size = isMobile ? 24 : 36;
            this.vx = (Math.random() - 0.5) * (isMobile ? 8 : 12); // Horizontal spread
            this.vy = -(Math.random() * (isMobile ? 10 : 15) + 5); // Upward velocity
            this.alpha = 1;
            this.life = isMobile ? 80 : 100;
            this.maxLife = this.life;
            this.rotation = Math.random() * Math.PI * 2;
            this.spin = (Math.random() - 0.5) * 0.15;
          }

          update() {
            this.x += this.vx;
            this.y += this.vy;
            this.vy += 0.05; // Light gravity to slow upward motion
            this.vx *= 0.98;
            this.vy *= 0.98;
            this.rotation += this.spin;
            this.alpha = this.life / this.maxLife;
            this.life--;
            return this.life > 0;
          }

          draw() {
            ctx.save();
            ctx.translate(this.x, this.y);
            ctx.rotate(this.rotation);
            ctx.globalAlpha = this.alpha;
            ctx.font = `${this.size}px Arial`;
            ctx.fillText('ð', 0, 0);
            ctx.restore();
          }
        }

        function animate() {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          emojis = emojis.filter(p => p.update());
          emojis.forEach(p => p.draw());
          if (emojis.length > 0) requestAnimationFrame(animate);
        }

        function createEmojis(count) {
          // Spawn emojis from the bottom of the screen
          for (let i = 0; i < count; i++) {
            const x = Math.random() * canvas.width;
            const y = canvas.height; // Start at bottom
            emojis.push(new Emoji(x, y));
          }
          if (emojis.length > 0) animate();
        }

        return createEmojis;
      } catch (error) {
        console.error('Error initializing emoji effect:', error);
        return () => {};
      }
    }

    const createEmojis = initializeEmojiEffect();

    // Countdown Timer with Flip Effect
    function startCountdown() {
      try {
        const eventDate = new Date('2025-06-22T14:00:00').getTime();
        let prevValues = { days: null, hours: null, minutes: null, seconds: null };

        const x = setInterval(function() {
          const now = new Date().getTime();
          const distance = eventDate - now;

          const days = Math.floor(distance / (1000 * 60 * 60 * 24));
          const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
          const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
          const seconds = Math.floor((distance % (1000 * 60)) / 1000);

          updateFlip('days', days, prevValues.days);
          updateFlip('hours', hours, prevValues.hours);
          updateFlip('minutes', minutes, prevValues.minutes);
          updateFlip('seconds', seconds, prevValues.seconds);

          prevValues = { days, hours, minutes, seconds };

          if (distance < 0) {
            clearInterval(x);
            const countdown = document.getElementById('countdown');
            if (countdown) {
              countdown.innerHTML = '<span class="text-2xl neon-3d">Sá»± kiá»n ÄÃ£ báº¯t Äáº§u!</span>';
            }
          }
        }, 1000);

        function updateFlip(elementId, newValue, prevValue) {
          const flipCard = document.getElementById(`flip-${elementId}`);
          if (!flipCard) return;
          const formattedValue = newValue < 10 ? `0${newValue}` : newValue;
          if (prevValue !== null && newValue !== prevValue) {
            const front = flipCard.querySelector('.flip-card-front');
            const back = flipCard.querySelector('.flip-card-back');
            if (front && back) {
              back.textContent = formattedValue;
              flipCard.classList.add('flip');
              setTimeout(() => {
                front.textContent = formattedValue;
                flipCard.classList.remove('flip');
                const box = document.getElementById(elementId);
                if (box) {
                  box.classList.add('flash');
                  setTimeout(() => box.classList.remove('flash'), 500);
                }
              }, 600);
            }
          } else {
            const front = flipCard.querySelector('.flip-card-front');
            const back = flipCard.querySelector('.flip-card-back');
            if (front && back) {
              front.textContent = formattedValue;
              back.textContent = formattedValue;
            }
          }
        }
      } catch (error) {
        console.error('Error in startCountdown:', error);
      }
    }

    // Lightbox for Gallery
    function openLightbox(src) {
      try {
        const lightboxImg = document.getElementById('lightbox-img');
        if (lightboxImg) {
          lightboxImg.src = src;
          $('#lightbox').fadeIn(500);
          gsap.from('#lightbox-img', {
            scale: 0.8,
            opacity: 0,
            duration: 0.5,
            ease: 'power3.out'
          });
        }
      } catch (error) {
        console.error('Error in openLightbox:', error);
      }
    }

    function closeLightbox() {
      try {
        $('#lightbox').fadeOut(500);
      } catch (error) {
        console.error('Error in closeLightbox:', error);
      }
    }

    // Initialize
    window.onload = function() {
      try {
        startCountdown();
        const audio1 = document.getElementById('backgroundMusic1');
        const audio2 = document.getElementById('backgroundMusic2');

        if (!audio1 || !audio2) {
          console.error('Audio elements missing:', { audio1, audio2 });
        } else {
          audio1.volume = 0.3;
          audio2.volume = 0.7;
        }

        // Play second audio and trigger emoji effect on double-click
        document.addEventListener('dblclick', function playAudio2() {
          if (audio1 && audio2) {
            audio1.pause();
            audio2.loop = true;
            audio2.play().catch(err => console.error('Audio playback for music2 failed:', err));
          }
          // Trigger emoji effect from bottom of the screen
          createEmojis(window.innerWidth <= 768 ? 50 : 100);
        });
      } catch (error) {
        console.error('Error in window.onload:', error);
      }
    };
  </script>
</body>
</html>